// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  user_id    Int       @id
  nick_name  String    @unique
  sign       Boolean   @default(false)
  state      Int       @default(0)
  img_name   String?   @default("default.png")
  win        Int       @default(0)
  lose       Int       @default(0)
  ladder     Int       @default(1000)
  created_at DateTime  @default(now())
  updated_at DateTime  @updatedAt
  friends    Friends[] @relation("following_user")
  tokens     Tokens?  @relation("tokens_user")
}

model Friends {
    id                Int      @default(autoincrement()) @id
    following_user    User     @relation("following_user", fields: [following_user_id], references: [user_id])
    following_user_id Int
    followed_user_id  Int
    created_at        DateTime @default(now())
}

model Tokens {
    id             Int      @default(autoincrement()) @id
    tokens_user    User     @relation("tokens_user", fields: [tokens_user_id], references: [user_id])
    tokens_user_id Int      @unique
    access_token   String?
    refresh_token  String?
    created_at     DateTime @default(now())
}